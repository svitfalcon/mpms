<!DOCTYPE html>
<html lang="en">


<!-- add-patient24:06-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">
    <title>MULTI PATIENT MONITORING SYSTEM</title>
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/select2.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <!--[if lt IE 9]>
		<script src="assets/js/html5shiv.min.js"></script>
		<script src="assets/js/respond.min.js"></script>
	<![endif]-->
</head>

<body>
    <div class="main-wrapper">
        <div class="header">
			<div class="header-left">
				<a href="index.html" class="logo">
					<img src="assets/img/logo.png" width="35" height="35" alt=""> <span>MPMS</span>
				</a>
			</div>
			<a id="toggle_btn" href="javascript:void(0);"><i class="fa fa-bars"></i></a>
            <a id="mobile_btn" class="mobile_btn float-left" href="#sidebar"><i class="fa fa-bars"></i></a>
      
        </div>
        <div class="sidebar" id="sidebar">
            <div class="sidebar-inner slimscroll">
                <div id="sidebar-menu" class="sidebar-menu">
                    <ul>
                        <li class="menu-title">Main</li>
                        <li >
                            
                        </li>
                        <li>
                            <a href="index.html"><i class="fa fa-wheelchair"></i> <span>Patients</span></a>
                        </li>
                        <li class="active">
                            <a href="add-patient.html"><i class="fa fa-plus"></i> <span>Add Patients</span></a>
                        </li>
                        <li >
                            <a href="addSensor.html"><i class="fa fa-hand-o-down"></i> <span>Add New Sensors ID </span></a>
                        </li>

                        <li >
                            <a href="searchReport.html"><i class="fa fa-file"></i> <span>Patient Report </span></a>
                        </li>
                       
                    </ul>
                </div>
            </div>
        </div>
        <div class="page-wrapper">
            <div class="content">
                <div class="row">
                    <div class="col-lg-8 offset-lg-2">
                        <h4 class="page-title">Add Patient</h4>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-8 offset-lg-2">
                     
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label>First Name <span class="text-danger">*</span></label>
                                        <input class="form-control" id="fname"  type="text">
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label>Last Name</label>
                                        <input class="form-control" id="lname" type="text">
                                    </div>
                                </div>
                               
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label>Email <span class="text-danger">*</span></label>
                                        <input class="form-control" id="email" type="email">
                                    </div>
                                </div>
                              
								<div class="col-sm-6">
                                    <div class="form-group">
                                        <label>Date of Birth</label>
                                        <div class="cal-icon">
                                            <input type="text" id="dob" class="form-control datetimepicker">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
									<div class="form-group gender-select">
										<label class="gen-label">Gender:</label>
										<div class="form-check-inline">
											<label class="form-check-label">
												<input type="radio" id="genderM" name="gender" value="Male" class="form-check-input">Male
											</label>
										</div>
										<div class="form-check-inline">
											<label class="form-check-label">
												<input type="radio" name="gender"value="Female" class="form-check-input">Female
											</label>
										</div>
									</div>
                                </div>
								
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label>Phone </label>
                                        <input class="form-control" id="phone" type="text">
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6 col-lg-3">
                                    <div class="form-group">
                                        <label>Assign to Sesnor</label>
                                        <select class="form-control select" id="sensorId">
                                            
                                            <!-- <option>ID02</option>
                                            <option>ID03</option>
                                            <option>ID04</option> -->
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-6">
									<div class="form-group">
										<label>Avatar</label>
										<div class="profile-upload">
											<div class="upload-img">
												<img alt="" src="assets/img/user.jpg">
											</div>
											<div class="upload-input">
												<input type="file" class="form-control">
											</div>
										</div>
									</div>
                                </div>
                            </div>
                            <!-- <div class="form-group">
                                <label class="display-block">Status</label>
								<div class="form-check form-check-inline">
									<input class="form-check-input" type="radio" name="status" id="patient_active" value="option1" checked>
									<label class="form-check-label" for="patient_active">
									Active
									</label>
								</div>
								<div class="form-check form-check-inline">
									<input class="form-check-input" type="radio" name="status" id="patient_inactive" value="option2">
									<label class="form-check-label" for="patient_inactive">
									Inactive
									</label>
								</div>
                            </div> -->
                            <div class="m-t-20 text-center">
                                <button class="btn btn-primary submit-btn" onclick="createPatient()">Create Patient</button>
                            </div>
                     
                    </div>
                </div>
            </div>
	
        </div>
    </div>
    <div class="sidebar-overlay" data-reff=""></div>
    <script src="assets/js/jquery-3.2.1.min.js"></script>
	<script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/jquery.slimscroll.js"></script>
    <script src="assets/js/select2.min.js"></script>
	<script src="assets/js/moment.min.js"></script>
	<script src="assets/js/bootstrap-datetimepicker.min.js"></script>
    <script src="assets/js/app.js"></script>
</body>


<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/5.10.0/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.16.0/firebase.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->


<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyDgNDwCrxPBSe6PCBzHUMle4Hjk4O7XjFc",
    authDomain: "multi-patient-monitoring-sys.firebaseapp.com",
    databaseURL: "https://multi-patient-monitoring-sys-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "multi-patient-monitoring-sys",
    storageBucket: "multi-patient-monitoring-sys.appspot.com",
    messagingSenderId: "939816688997",
    appId: "1:939816688997:web:1d88b9f41f107e8d7cd58c",
    measurementId: "G-70RQK7WPSZ"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  let ref= firebase.database().ref()   
  ref.on('value',gotData,errData);

  function gotData(data) {
  
    
    sc=data.val();
    keys=Object.keys(sc);

    for(var i=0;i<keys.length;i++){
      
        k=keys[i];
        document.getElementById("sensorId").innerHTML += `
        <option>`+k+`</option>
        `
        console.log(k)
    }
  }
  function errData(err) {
    console.log(err)
  }

  function createPatient () {
      let gender;
      let fname = document.querySelector("#fname").value;
      let lname = document.querySelector("#lname").value;
      let email = document.querySelector("#email").value;
      let dob = document.querySelector("#dob").value;
      var radio = $("input[type=radio][name=gender]").filter(":checked")[0];
        if (radio) {
            gender = radio
        }
        else {
            alert('Please Select Your Gender');
        }
      let phone = document.querySelector("#phone").value;

      let sensorId = document.querySelector("#sensorId").value;
      let dbRef= firebase.database().ref(sensorId) 
      dbRef.child(sensorId+"Data").set(
        {
              Fname : fname,
              Lname : lname,
              Email : email,
              Phone : phone,
              Gender : gender,
              Dob : dob , 
              sensorId : sensorId
        }
        ).then(function(){
            alert("Patient Added Successfully")
        }).catch();
    
  }




</script>


<!-- add-patient24:07-->
</html>
